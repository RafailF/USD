{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.set.difference.v2.js\");\nrequire(\"core-js/modules/es.set.intersection.v2.js\");\nrequire(\"core-js/modules/es.set.is-disjoint-from.v2.js\");\nrequire(\"core-js/modules/es.set.is-subset-of.v2.js\");\nrequire(\"core-js/modules/es.set.is-superset-of.v2.js\");\nrequire(\"core-js/modules/es.set.symmetric-difference.v2.js\");\nrequire(\"core-js/modules/es.set.union.v2.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OpenElementStack = void 0;\nconst html_js_1 = require(\"../common/html.js\");\n//Element utils\nconst IMPLICIT_END_TAG_REQUIRED = new Set([html_js_1.TAG_ID.DD, html_js_1.TAG_ID.DT, html_js_1.TAG_ID.LI, html_js_1.TAG_ID.OPTGROUP, html_js_1.TAG_ID.OPTION, html_js_1.TAG_ID.P, html_js_1.TAG_ID.RB, html_js_1.TAG_ID.RP, html_js_1.TAG_ID.RT, html_js_1.TAG_ID.RTC]);\nconst IMPLICIT_END_TAG_REQUIRED_THOROUGHLY = new Set([...IMPLICIT_END_TAG_REQUIRED, html_js_1.TAG_ID.CAPTION, html_js_1.TAG_ID.COLGROUP, html_js_1.TAG_ID.TBODY, html_js_1.TAG_ID.TD, html_js_1.TAG_ID.TFOOT, html_js_1.TAG_ID.TH, html_js_1.TAG_ID.THEAD, html_js_1.TAG_ID.TR]);\nconst SCOPING_ELEMENTS_HTML = new Set([html_js_1.TAG_ID.APPLET, html_js_1.TAG_ID.CAPTION, html_js_1.TAG_ID.HTML, html_js_1.TAG_ID.MARQUEE, html_js_1.TAG_ID.OBJECT, html_js_1.TAG_ID.TABLE, html_js_1.TAG_ID.TD, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.TH]);\nconst SCOPING_ELEMENTS_HTML_LIST = new Set([...SCOPING_ELEMENTS_HTML, html_js_1.TAG_ID.OL, html_js_1.TAG_ID.UL]);\nconst SCOPING_ELEMENTS_HTML_BUTTON = new Set([...SCOPING_ELEMENTS_HTML, html_js_1.TAG_ID.BUTTON]);\nconst SCOPING_ELEMENTS_MATHML = new Set([html_js_1.TAG_ID.ANNOTATION_XML, html_js_1.TAG_ID.MI, html_js_1.TAG_ID.MN, html_js_1.TAG_ID.MO, html_js_1.TAG_ID.MS, html_js_1.TAG_ID.MTEXT]);\nconst SCOPING_ELEMENTS_SVG = new Set([html_js_1.TAG_ID.DESC, html_js_1.TAG_ID.FOREIGN_OBJECT, html_js_1.TAG_ID.TITLE]);\nconst TABLE_ROW_CONTEXT = new Set([html_js_1.TAG_ID.TR, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.HTML]);\nconst TABLE_BODY_CONTEXT = new Set([html_js_1.TAG_ID.TBODY, html_js_1.TAG_ID.TFOOT, html_js_1.TAG_ID.THEAD, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.HTML]);\nconst TABLE_CONTEXT = new Set([html_js_1.TAG_ID.TABLE, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.HTML]);\nconst TABLE_CELLS = new Set([html_js_1.TAG_ID.TD, html_js_1.TAG_ID.TH]);\n//Stack of open elements\nclass OpenElementStack {\n  get currentTmplContentOrNode() {\n    return this._isInTemplate() ? this.treeAdapter.getTemplateContent(this.current) : this.current;\n  }\n  constructor(document, treeAdapter, handler) {\n    this.treeAdapter = treeAdapter;\n    this.handler = handler;\n    this.items = [];\n    this.tagIDs = [];\n    this.stackTop = -1;\n    this.tmplCount = 0;\n    this.currentTagId = html_js_1.TAG_ID.UNKNOWN;\n    this.current = document;\n  }\n  //Index of element\n  _indexOf(element) {\n    return this.items.lastIndexOf(element, this.stackTop);\n  }\n  //Update current element\n  _isInTemplate() {\n    return this.currentTagId === html_js_1.TAG_ID.TEMPLATE && this.treeAdapter.getNamespaceURI(this.current) === html_js_1.NS.HTML;\n  }\n  _updateCurrentElement() {\n    this.current = this.items[this.stackTop];\n    this.currentTagId = this.tagIDs[this.stackTop];\n  }\n  //Mutations\n  push(element, tagID) {\n    this.stackTop++;\n    this.items[this.stackTop] = element;\n    this.current = element;\n    this.tagIDs[this.stackTop] = tagID;\n    this.currentTagId = tagID;\n    if (this._isInTemplate()) {\n      this.tmplCount++;\n    }\n    this.handler.onItemPush(element, tagID, true);\n  }\n  pop() {\n    const popped = this.current;\n    if (this.tmplCount > 0 && this._isInTemplate()) {\n      this.tmplCount--;\n    }\n    this.stackTop--;\n    this._updateCurrentElement();\n    this.handler.onItemPop(popped, true);\n  }\n  replace(oldElement, newElement) {\n    const idx = this._indexOf(oldElement);\n    this.items[idx] = newElement;\n    if (idx === this.stackTop) {\n      this.current = newElement;\n    }\n  }\n  insertAfter(referenceElement, newElement, newElementID) {\n    const insertionIdx = this._indexOf(referenceElement) + 1;\n    this.items.splice(insertionIdx, 0, newElement);\n    this.tagIDs.splice(insertionIdx, 0, newElementID);\n    this.stackTop++;\n    if (insertionIdx === this.stackTop) {\n      this._updateCurrentElement();\n    }\n    this.handler.onItemPush(this.current, this.currentTagId, insertionIdx === this.stackTop);\n  }\n  popUntilTagNamePopped(tagName) {\n    let targetIdx = this.stackTop + 1;\n    do {\n      targetIdx = this.tagIDs.lastIndexOf(tagName, targetIdx - 1);\n    } while (targetIdx > 0 && this.treeAdapter.getNamespaceURI(this.items[targetIdx]) !== html_js_1.NS.HTML);\n    this.shortenToLength(targetIdx < 0 ? 0 : targetIdx);\n  }\n  shortenToLength(idx) {\n    while (this.stackTop >= idx) {\n      const popped = this.current;\n      if (this.tmplCount > 0 && this._isInTemplate()) {\n        this.tmplCount -= 1;\n      }\n      this.stackTop--;\n      this._updateCurrentElement();\n      this.handler.onItemPop(popped, this.stackTop < idx);\n    }\n  }\n  popUntilElementPopped(element) {\n    const idx = this._indexOf(element);\n    this.shortenToLength(idx < 0 ? 0 : idx);\n  }\n  popUntilPopped(tagNames, targetNS) {\n    const idx = this._indexOfTagNames(tagNames, targetNS);\n    this.shortenToLength(idx < 0 ? 0 : idx);\n  }\n  popUntilNumberedHeaderPopped() {\n    this.popUntilPopped(html_js_1.NUMBERED_HEADERS, html_js_1.NS.HTML);\n  }\n  popUntilTableCellPopped() {\n    this.popUntilPopped(TABLE_CELLS, html_js_1.NS.HTML);\n  }\n  popAllUpToHtmlElement() {\n    //NOTE: here we assume that the root <html> element is always first in the open element stack, so\n    //we perform this fast stack clean up.\n    this.tmplCount = 0;\n    this.shortenToLength(1);\n  }\n  _indexOfTagNames(tagNames, namespace) {\n    for (let i = this.stackTop; i >= 0; i--) {\n      if (tagNames.has(this.tagIDs[i]) && this.treeAdapter.getNamespaceURI(this.items[i]) === namespace) {\n        return i;\n      }\n    }\n    return -1;\n  }\n  clearBackTo(tagNames, targetNS) {\n    const idx = this._indexOfTagNames(tagNames, targetNS);\n    this.shortenToLength(idx + 1);\n  }\n  clearBackToTableContext() {\n    this.clearBackTo(TABLE_CONTEXT, html_js_1.NS.HTML);\n  }\n  clearBackToTableBodyContext() {\n    this.clearBackTo(TABLE_BODY_CONTEXT, html_js_1.NS.HTML);\n  }\n  clearBackToTableRowContext() {\n    this.clearBackTo(TABLE_ROW_CONTEXT, html_js_1.NS.HTML);\n  }\n  remove(element) {\n    const idx = this._indexOf(element);\n    if (idx >= 0) {\n      if (idx === this.stackTop) {\n        this.pop();\n      } else {\n        this.items.splice(idx, 1);\n        this.tagIDs.splice(idx, 1);\n        this.stackTop--;\n        this._updateCurrentElement();\n        this.handler.onItemPop(element, false);\n      }\n    }\n  }\n  //Search\n  tryPeekProperlyNestedBodyElement() {\n    //Properly nested <body> element (should be second element in stack).\n    return this.stackTop >= 1 && this.tagIDs[1] === html_js_1.TAG_ID.BODY ? this.items[1] : null;\n  }\n  contains(element) {\n    return this._indexOf(element) > -1;\n  }\n  getCommonAncestor(element) {\n    const elementIdx = this._indexOf(element) - 1;\n    return elementIdx >= 0 ? this.items[elementIdx] : null;\n  }\n  isRootHtmlElementCurrent() {\n    return this.stackTop === 0 && this.tagIDs[0] === html_js_1.TAG_ID.HTML;\n  }\n  //Element in scope\n  hasInDynamicScope(tagName, htmlScope) {\n    for (let i = this.stackTop; i >= 0; i--) {\n      const tn = this.tagIDs[i];\n      switch (this.treeAdapter.getNamespaceURI(this.items[i])) {\n        case html_js_1.NS.HTML:\n          {\n            if (tn === tagName) return true;\n            if (htmlScope.has(tn)) return false;\n            break;\n          }\n        case html_js_1.NS.SVG:\n          {\n            if (SCOPING_ELEMENTS_SVG.has(tn)) return false;\n            break;\n          }\n        case html_js_1.NS.MATHML:\n          {\n            if (SCOPING_ELEMENTS_MATHML.has(tn)) return false;\n            break;\n          }\n      }\n    }\n    return true;\n  }\n  hasInScope(tagName) {\n    return this.hasInDynamicScope(tagName, SCOPING_ELEMENTS_HTML);\n  }\n  hasInListItemScope(tagName) {\n    return this.hasInDynamicScope(tagName, SCOPING_ELEMENTS_HTML_LIST);\n  }\n  hasInButtonScope(tagName) {\n    return this.hasInDynamicScope(tagName, SCOPING_ELEMENTS_HTML_BUTTON);\n  }\n  hasNumberedHeaderInScope() {\n    for (let i = this.stackTop; i >= 0; i--) {\n      const tn = this.tagIDs[i];\n      switch (this.treeAdapter.getNamespaceURI(this.items[i])) {\n        case html_js_1.NS.HTML:\n          {\n            if (html_js_1.NUMBERED_HEADERS.has(tn)) return true;\n            if (SCOPING_ELEMENTS_HTML.has(tn)) return false;\n            break;\n          }\n        case html_js_1.NS.SVG:\n          {\n            if (SCOPING_ELEMENTS_SVG.has(tn)) return false;\n            break;\n          }\n        case html_js_1.NS.MATHML:\n          {\n            if (SCOPING_ELEMENTS_MATHML.has(tn)) return false;\n            break;\n          }\n      }\n    }\n    return true;\n  }\n  hasInTableScope(tagName) {\n    for (let i = this.stackTop; i >= 0; i--) {\n      if (this.treeAdapter.getNamespaceURI(this.items[i]) !== html_js_1.NS.HTML) {\n        continue;\n      }\n      switch (this.tagIDs[i]) {\n        case tagName:\n          {\n            return true;\n          }\n        case html_js_1.TAG_ID.TABLE:\n        case html_js_1.TAG_ID.HTML:\n          {\n            return false;\n          }\n      }\n    }\n    return true;\n  }\n  hasTableBodyContextInTableScope() {\n    for (let i = this.stackTop; i >= 0; i--) {\n      if (this.treeAdapter.getNamespaceURI(this.items[i]) !== html_js_1.NS.HTML) {\n        continue;\n      }\n      switch (this.tagIDs[i]) {\n        case html_js_1.TAG_ID.TBODY:\n        case html_js_1.TAG_ID.THEAD:\n        case html_js_1.TAG_ID.TFOOT:\n          {\n            return true;\n          }\n        case html_js_1.TAG_ID.TABLE:\n        case html_js_1.TAG_ID.HTML:\n          {\n            return false;\n          }\n      }\n    }\n    return true;\n  }\n  hasInSelectScope(tagName) {\n    for (let i = this.stackTop; i >= 0; i--) {\n      if (this.treeAdapter.getNamespaceURI(this.items[i]) !== html_js_1.NS.HTML) {\n        continue;\n      }\n      switch (this.tagIDs[i]) {\n        case tagName:\n          {\n            return true;\n          }\n        case html_js_1.TAG_ID.OPTION:\n        case html_js_1.TAG_ID.OPTGROUP:\n          {\n            break;\n          }\n        default:\n          {\n            return false;\n          }\n      }\n    }\n    return true;\n  }\n  //Implied end tags\n  generateImpliedEndTags() {\n    while (IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId)) {\n      this.pop();\n    }\n  }\n  generateImpliedEndTagsThoroughly() {\n    while (IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId)) {\n      this.pop();\n    }\n  }\n  generateImpliedEndTagsWithExclusion(exclusionId) {\n    while (this.currentTagId !== exclusionId && IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId)) {\n      this.pop();\n    }\n  }\n}\nexports.OpenElementStack = OpenElementStack;","map":{"version":3,"names":["require","Object","defineProperty","exports","value","OpenElementStack","html_js_1","IMPLICIT_END_TAG_REQUIRED","Set","TAG_ID","DD","DT","LI","OPTGROUP","OPTION","P","RB","RP","RT","RTC","IMPLICIT_END_TAG_REQUIRED_THOROUGHLY","CAPTION","COLGROUP","TBODY","TD","TFOOT","TH","THEAD","TR","SCOPING_ELEMENTS_HTML","APPLET","HTML","MARQUEE","OBJECT","TABLE","TEMPLATE","SCOPING_ELEMENTS_HTML_LIST","OL","UL","SCOPING_ELEMENTS_HTML_BUTTON","BUTTON","SCOPING_ELEMENTS_MATHML","ANNOTATION_XML","MI","MN","MO","MS","MTEXT","SCOPING_ELEMENTS_SVG","DESC","FOREIGN_OBJECT","TITLE","TABLE_ROW_CONTEXT","TABLE_BODY_CONTEXT","TABLE_CONTEXT","TABLE_CELLS","currentTmplContentOrNode","_isInTemplate","treeAdapter","getTemplateContent","current","constructor","document","handler","items","tagIDs","stackTop","tmplCount","currentTagId","UNKNOWN","_indexOf","element","lastIndexOf","getNamespaceURI","NS","_updateCurrentElement","push","tagID","onItemPush","pop","popped","onItemPop","replace","oldElement","newElement","idx","insertAfter","referenceElement","newElementID","insertionIdx","splice","popUntilTagNamePopped","tagName","targetIdx","shortenToLength","popUntilElementPopped","popUntilPopped","tagNames","targetNS","_indexOfTagNames","popUntilNumberedHeaderPopped","NUMBERED_HEADERS","popUntilTableCellPopped","popAllUpToHtmlElement","namespace","i","has","clearBackTo","clearBackToTableContext","clearBackToTableBodyContext","clearBackToTableRowContext","remove","tryPeekProperlyNestedBodyElement","BODY","contains","getCommonAncestor","elementIdx","isRootHtmlElementCurrent","hasInDynamicScope","htmlScope","tn","SVG","MATHML","hasInScope","hasInListItemScope","hasInButtonScope","hasNumberedHeaderInScope","hasInTableScope","hasTableBodyContextInTableScope","hasInSelectScope","generateImpliedEndTags","generateImpliedEndTagsThoroughly","generateImpliedEndTagsWithExclusion","exclusionId"],"sources":["/Users/feyraf/Desktop/projets/Roma/invest/node_modules/jsdom/node_modules/parse5/dist/cjs/parser/open-element-stack.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OpenElementStack = void 0;\nconst html_js_1 = require(\"../common/html.js\");\n//Element utils\nconst IMPLICIT_END_TAG_REQUIRED = new Set([html_js_1.TAG_ID.DD, html_js_1.TAG_ID.DT, html_js_1.TAG_ID.LI, html_js_1.TAG_ID.OPTGROUP, html_js_1.TAG_ID.OPTION, html_js_1.TAG_ID.P, html_js_1.TAG_ID.RB, html_js_1.TAG_ID.RP, html_js_1.TAG_ID.RT, html_js_1.TAG_ID.RTC]);\nconst IMPLICIT_END_TAG_REQUIRED_THOROUGHLY = new Set([\n    ...IMPLICIT_END_TAG_REQUIRED,\n    html_js_1.TAG_ID.CAPTION,\n    html_js_1.TAG_ID.COLGROUP,\n    html_js_1.TAG_ID.TBODY,\n    html_js_1.TAG_ID.TD,\n    html_js_1.TAG_ID.TFOOT,\n    html_js_1.TAG_ID.TH,\n    html_js_1.TAG_ID.THEAD,\n    html_js_1.TAG_ID.TR,\n]);\nconst SCOPING_ELEMENTS_HTML = new Set([\n    html_js_1.TAG_ID.APPLET,\n    html_js_1.TAG_ID.CAPTION,\n    html_js_1.TAG_ID.HTML,\n    html_js_1.TAG_ID.MARQUEE,\n    html_js_1.TAG_ID.OBJECT,\n    html_js_1.TAG_ID.TABLE,\n    html_js_1.TAG_ID.TD,\n    html_js_1.TAG_ID.TEMPLATE,\n    html_js_1.TAG_ID.TH,\n]);\nconst SCOPING_ELEMENTS_HTML_LIST = new Set([...SCOPING_ELEMENTS_HTML, html_js_1.TAG_ID.OL, html_js_1.TAG_ID.UL]);\nconst SCOPING_ELEMENTS_HTML_BUTTON = new Set([...SCOPING_ELEMENTS_HTML, html_js_1.TAG_ID.BUTTON]);\nconst SCOPING_ELEMENTS_MATHML = new Set([html_js_1.TAG_ID.ANNOTATION_XML, html_js_1.TAG_ID.MI, html_js_1.TAG_ID.MN, html_js_1.TAG_ID.MO, html_js_1.TAG_ID.MS, html_js_1.TAG_ID.MTEXT]);\nconst SCOPING_ELEMENTS_SVG = new Set([html_js_1.TAG_ID.DESC, html_js_1.TAG_ID.FOREIGN_OBJECT, html_js_1.TAG_ID.TITLE]);\nconst TABLE_ROW_CONTEXT = new Set([html_js_1.TAG_ID.TR, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.HTML]);\nconst TABLE_BODY_CONTEXT = new Set([html_js_1.TAG_ID.TBODY, html_js_1.TAG_ID.TFOOT, html_js_1.TAG_ID.THEAD, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.HTML]);\nconst TABLE_CONTEXT = new Set([html_js_1.TAG_ID.TABLE, html_js_1.TAG_ID.TEMPLATE, html_js_1.TAG_ID.HTML]);\nconst TABLE_CELLS = new Set([html_js_1.TAG_ID.TD, html_js_1.TAG_ID.TH]);\n//Stack of open elements\nclass OpenElementStack {\n    get currentTmplContentOrNode() {\n        return this._isInTemplate() ? this.treeAdapter.getTemplateContent(this.current) : this.current;\n    }\n    constructor(document, treeAdapter, handler) {\n        this.treeAdapter = treeAdapter;\n        this.handler = handler;\n        this.items = [];\n        this.tagIDs = [];\n        this.stackTop = -1;\n        this.tmplCount = 0;\n        this.currentTagId = html_js_1.TAG_ID.UNKNOWN;\n        this.current = document;\n    }\n    //Index of element\n    _indexOf(element) {\n        return this.items.lastIndexOf(element, this.stackTop);\n    }\n    //Update current element\n    _isInTemplate() {\n        return this.currentTagId === html_js_1.TAG_ID.TEMPLATE && this.treeAdapter.getNamespaceURI(this.current) === html_js_1.NS.HTML;\n    }\n    _updateCurrentElement() {\n        this.current = this.items[this.stackTop];\n        this.currentTagId = this.tagIDs[this.stackTop];\n    }\n    //Mutations\n    push(element, tagID) {\n        this.stackTop++;\n        this.items[this.stackTop] = element;\n        this.current = element;\n        this.tagIDs[this.stackTop] = tagID;\n        this.currentTagId = tagID;\n        if (this._isInTemplate()) {\n            this.tmplCount++;\n        }\n        this.handler.onItemPush(element, tagID, true);\n    }\n    pop() {\n        const popped = this.current;\n        if (this.tmplCount > 0 && this._isInTemplate()) {\n            this.tmplCount--;\n        }\n        this.stackTop--;\n        this._updateCurrentElement();\n        this.handler.onItemPop(popped, true);\n    }\n    replace(oldElement, newElement) {\n        const idx = this._indexOf(oldElement);\n        this.items[idx] = newElement;\n        if (idx === this.stackTop) {\n            this.current = newElement;\n        }\n    }\n    insertAfter(referenceElement, newElement, newElementID) {\n        const insertionIdx = this._indexOf(referenceElement) + 1;\n        this.items.splice(insertionIdx, 0, newElement);\n        this.tagIDs.splice(insertionIdx, 0, newElementID);\n        this.stackTop++;\n        if (insertionIdx === this.stackTop) {\n            this._updateCurrentElement();\n        }\n        this.handler.onItemPush(this.current, this.currentTagId, insertionIdx === this.stackTop);\n    }\n    popUntilTagNamePopped(tagName) {\n        let targetIdx = this.stackTop + 1;\n        do {\n            targetIdx = this.tagIDs.lastIndexOf(tagName, targetIdx - 1);\n        } while (targetIdx > 0 && this.treeAdapter.getNamespaceURI(this.items[targetIdx]) !== html_js_1.NS.HTML);\n        this.shortenToLength(targetIdx < 0 ? 0 : targetIdx);\n    }\n    shortenToLength(idx) {\n        while (this.stackTop >= idx) {\n            const popped = this.current;\n            if (this.tmplCount > 0 && this._isInTemplate()) {\n                this.tmplCount -= 1;\n            }\n            this.stackTop--;\n            this._updateCurrentElement();\n            this.handler.onItemPop(popped, this.stackTop < idx);\n        }\n    }\n    popUntilElementPopped(element) {\n        const idx = this._indexOf(element);\n        this.shortenToLength(idx < 0 ? 0 : idx);\n    }\n    popUntilPopped(tagNames, targetNS) {\n        const idx = this._indexOfTagNames(tagNames, targetNS);\n        this.shortenToLength(idx < 0 ? 0 : idx);\n    }\n    popUntilNumberedHeaderPopped() {\n        this.popUntilPopped(html_js_1.NUMBERED_HEADERS, html_js_1.NS.HTML);\n    }\n    popUntilTableCellPopped() {\n        this.popUntilPopped(TABLE_CELLS, html_js_1.NS.HTML);\n    }\n    popAllUpToHtmlElement() {\n        //NOTE: here we assume that the root <html> element is always first in the open element stack, so\n        //we perform this fast stack clean up.\n        this.tmplCount = 0;\n        this.shortenToLength(1);\n    }\n    _indexOfTagNames(tagNames, namespace) {\n        for (let i = this.stackTop; i >= 0; i--) {\n            if (tagNames.has(this.tagIDs[i]) && this.treeAdapter.getNamespaceURI(this.items[i]) === namespace) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    clearBackTo(tagNames, targetNS) {\n        const idx = this._indexOfTagNames(tagNames, targetNS);\n        this.shortenToLength(idx + 1);\n    }\n    clearBackToTableContext() {\n        this.clearBackTo(TABLE_CONTEXT, html_js_1.NS.HTML);\n    }\n    clearBackToTableBodyContext() {\n        this.clearBackTo(TABLE_BODY_CONTEXT, html_js_1.NS.HTML);\n    }\n    clearBackToTableRowContext() {\n        this.clearBackTo(TABLE_ROW_CONTEXT, html_js_1.NS.HTML);\n    }\n    remove(element) {\n        const idx = this._indexOf(element);\n        if (idx >= 0) {\n            if (idx === this.stackTop) {\n                this.pop();\n            }\n            else {\n                this.items.splice(idx, 1);\n                this.tagIDs.splice(idx, 1);\n                this.stackTop--;\n                this._updateCurrentElement();\n                this.handler.onItemPop(element, false);\n            }\n        }\n    }\n    //Search\n    tryPeekProperlyNestedBodyElement() {\n        //Properly nested <body> element (should be second element in stack).\n        return this.stackTop >= 1 && this.tagIDs[1] === html_js_1.TAG_ID.BODY ? this.items[1] : null;\n    }\n    contains(element) {\n        return this._indexOf(element) > -1;\n    }\n    getCommonAncestor(element) {\n        const elementIdx = this._indexOf(element) - 1;\n        return elementIdx >= 0 ? this.items[elementIdx] : null;\n    }\n    isRootHtmlElementCurrent() {\n        return this.stackTop === 0 && this.tagIDs[0] === html_js_1.TAG_ID.HTML;\n    }\n    //Element in scope\n    hasInDynamicScope(tagName, htmlScope) {\n        for (let i = this.stackTop; i >= 0; i--) {\n            const tn = this.tagIDs[i];\n            switch (this.treeAdapter.getNamespaceURI(this.items[i])) {\n                case html_js_1.NS.HTML: {\n                    if (tn === tagName)\n                        return true;\n                    if (htmlScope.has(tn))\n                        return false;\n                    break;\n                }\n                case html_js_1.NS.SVG: {\n                    if (SCOPING_ELEMENTS_SVG.has(tn))\n                        return false;\n                    break;\n                }\n                case html_js_1.NS.MATHML: {\n                    if (SCOPING_ELEMENTS_MATHML.has(tn))\n                        return false;\n                    break;\n                }\n            }\n        }\n        return true;\n    }\n    hasInScope(tagName) {\n        return this.hasInDynamicScope(tagName, SCOPING_ELEMENTS_HTML);\n    }\n    hasInListItemScope(tagName) {\n        return this.hasInDynamicScope(tagName, SCOPING_ELEMENTS_HTML_LIST);\n    }\n    hasInButtonScope(tagName) {\n        return this.hasInDynamicScope(tagName, SCOPING_ELEMENTS_HTML_BUTTON);\n    }\n    hasNumberedHeaderInScope() {\n        for (let i = this.stackTop; i >= 0; i--) {\n            const tn = this.tagIDs[i];\n            switch (this.treeAdapter.getNamespaceURI(this.items[i])) {\n                case html_js_1.NS.HTML: {\n                    if (html_js_1.NUMBERED_HEADERS.has(tn))\n                        return true;\n                    if (SCOPING_ELEMENTS_HTML.has(tn))\n                        return false;\n                    break;\n                }\n                case html_js_1.NS.SVG: {\n                    if (SCOPING_ELEMENTS_SVG.has(tn))\n                        return false;\n                    break;\n                }\n                case html_js_1.NS.MATHML: {\n                    if (SCOPING_ELEMENTS_MATHML.has(tn))\n                        return false;\n                    break;\n                }\n            }\n        }\n        return true;\n    }\n    hasInTableScope(tagName) {\n        for (let i = this.stackTop; i >= 0; i--) {\n            if (this.treeAdapter.getNamespaceURI(this.items[i]) !== html_js_1.NS.HTML) {\n                continue;\n            }\n            switch (this.tagIDs[i]) {\n                case tagName: {\n                    return true;\n                }\n                case html_js_1.TAG_ID.TABLE:\n                case html_js_1.TAG_ID.HTML: {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    hasTableBodyContextInTableScope() {\n        for (let i = this.stackTop; i >= 0; i--) {\n            if (this.treeAdapter.getNamespaceURI(this.items[i]) !== html_js_1.NS.HTML) {\n                continue;\n            }\n            switch (this.tagIDs[i]) {\n                case html_js_1.TAG_ID.TBODY:\n                case html_js_1.TAG_ID.THEAD:\n                case html_js_1.TAG_ID.TFOOT: {\n                    return true;\n                }\n                case html_js_1.TAG_ID.TABLE:\n                case html_js_1.TAG_ID.HTML: {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    hasInSelectScope(tagName) {\n        for (let i = this.stackTop; i >= 0; i--) {\n            if (this.treeAdapter.getNamespaceURI(this.items[i]) !== html_js_1.NS.HTML) {\n                continue;\n            }\n            switch (this.tagIDs[i]) {\n                case tagName: {\n                    return true;\n                }\n                case html_js_1.TAG_ID.OPTION:\n                case html_js_1.TAG_ID.OPTGROUP: {\n                    break;\n                }\n                default: {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    //Implied end tags\n    generateImpliedEndTags() {\n        while (IMPLICIT_END_TAG_REQUIRED.has(this.currentTagId)) {\n            this.pop();\n        }\n    }\n    generateImpliedEndTagsThoroughly() {\n        while (IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId)) {\n            this.pop();\n        }\n    }\n    generateImpliedEndTagsWithExclusion(exclusionId) {\n        while (this.currentTagId !== exclusionId && IMPLICIT_END_TAG_REQUIRED_THOROUGHLY.has(this.currentTagId)) {\n            this.pop();\n        }\n    }\n}\nexports.OpenElementStack = OpenElementStack;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}